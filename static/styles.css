:root {
    --bg:#050a18; 
    --text:#f3f5fb; 
    --muted:#c0c4d4; 
    --accent:#ffffff;
    --ripple-1:rgba(255,255,255,0.95);
    --ripple-2:rgba(255,255,255,0.8);
    --ripple-3:rgba(255,255,255,0.65);
    --ripple-4:rgba(255,255,255,0.5);
    --effect-blue:rgba(255,255,255,0.35);
    --effect-cyan:rgba(255,255,255,0.25);
    /* layout spacing tokens */
    --nav-gutter:180px;      /* keeps content clear of the vertical switcher */
    --content-gap:40px;      /* default horizontal breathing room */
    --content-top-pad:100px; /* header spacing */
  }
  
  * { box-sizing:border-box; margin:0; padding:0 }

  html, body {
    margin:0;
    height:100%;
    overflow:hidden;
    color:var(--text);
    font-family:'Sora',ui-sans-serif,system-ui,-apple-system,sans-serif;
    background:#020b24;
    background-image:
      radial-gradient(circle at 25% 15%, rgba(77,132,255,0.32), transparent 46%),
      radial-gradient(circle at 80% -5%, rgba(53,106,255,0.4), transparent 52%),
      linear-gradient(140deg, #020c28 0%, #031842 45%, #020b24 90%);
  }
  
.app-shell {
  position:fixed;
  inset:0;
  overflow:hidden;
  background:linear-gradient(150deg, rgba(6,25,60,0.92), rgba(4,14,38,0.98) 55%, rgba(2,8,24,1));
  padding:0;
  display:flex;
  flex-direction:column;
}

.dynamic-gradient-layer {
  position:absolute;
  inset:0;
  overflow:hidden;
  z-index:0;
  pointer-events:none;
  contain:layout paint;
}

.dynamic-gradient-base,
.dynamic-gradient-overlay {
  position:absolute;
  inset:0;
}

.dynamic-gradient-overlay {
  background:rgba(2, 4, 12, 0.32);
  backdrop-filter:blur(12px);
}

.dynamic-gradient-blob {
  position:absolute;
  border-radius:50%;
  pointer-events:none;
  filter:blur(140px);
  mix-blend-mode:screen;
  transition:transform 0.6s ease, opacity 0.6s ease;
  width:800px;
  height:800px;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
}

.app-pattern {
  position:absolute;
  inset:0;
  background-image:radial-gradient(circle, rgba(255,255,255,0.04) 1px, transparent 0);
  background-size:120px 120px;
  opacity:0.35;
  z-index:1;
  pointer-events:none;
}

.app-content {
  position:relative;
  z-index:3;
  padding:var(--content-top-pad) var(--content-gap) 80px;
  padding-inline:calc(var(--nav-gutter) + var(--content-gap));
  max-width:none;
  width:100%;
  margin:0;
  height:100%;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.view-ripple .app-content {
  max-width:none;
  padding:0;
}

.view-map .app-content {
  max-width:none;
  padding:0;
}
.effect-layer {
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:2;
}

/* Left sidebar - New Canvas and History buttons */
.left-sidebar {
  position:fixed;
  left:32px;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  flex-direction:column;
  gap:32px;
  z-index:1400;
}

.sidebar-btn {
  all:unset;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  cursor:pointer;
  color:rgba(255,255,255,0.7);
  transition:color 200ms ease;
}

.sidebar-btn:hover,
.sidebar-btn:focus,
.sidebar-btn:active {
  color:#ffffff;
  background:none;
  transform:none;
}

.sidebar-icon {
  display:flex;
  align-items:center;
  justify-content:center;
  background:none;
  box-shadow:none;
}

.sidebar-icon .icon {
  width:28px;
  height:28px;
}

.sidebar-label {
  font-size:11px;
  font-weight:600;
  letter-spacing:0.08em;
  text-transform:uppercase;
}

.sidebar-btn.active {
  color:#ffffff;
}

.sidebar-btn:disabled {
  opacity:0.3;
  cursor:not-allowed;
}

/* View switcher - now on right side */
.view-switcher {
  position:fixed;
  right:32px;
  top:50%;
  transform:translateY(-50%);
  display:flex;
  flex-direction:column;
  gap:24px;
  z-index:1400;
}

.view-switcher-btn {
  border:none;
  background:transparent;
  padding:0;
  border-radius:0;
  box-shadow:none;
  backdrop-filter:none;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  cursor:pointer;
  color:#ffffff;
  transition:color 200ms ease;
}

.view-switcher-btn:hover,
.view-switcher-btn:focus-visible {
  background:transparent;
  transform:none;
  box-shadow:none;
  backdrop-filter:none;
}

.view-switcher-icon {
  width:70px;
  height:70px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.3);
  background:rgba(255,255,255,0.1);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 200ms ease;
  box-shadow:none;
  backdrop-filter:blur(12px);
}

.view-switcher-icon .icon {
  width:28px;
  height:28px;
}

.view-switcher-label {
  font-size:12px;
  font-weight:600;
  letter-spacing:0.08em;
  text-transform:uppercase;
  opacity:0.9;
  color:#ffffff;
  transition:opacity 200ms ease;
}

.view-switcher-btn:hover .view-switcher-icon,
.view-switcher-btn.active .view-switcher-icon {
  background:rgba(255,255,255,0.9);
  color:#05070f;
  border-color:rgba(255,255,255,0.9);
  transform:translateY(-2px);
}

.view-switcher-btn:hover .view-switcher-label,
.view-switcher-btn.active .view-switcher-label {
  opacity:1;
}

/* 固定顶部控制栏 */
  .header {
    position:fixed;
    top:0;
    left:0;
    right:0;
    width:100vw;
    background:transparent;
    padding:20px 60px;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:1600;
    box-sizing:border-box;
    pointer-events:none;
  }
  
  .header > * {
    pointer-events:auto;
  }
  
  .brand-cluster {
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:6px;
  }
  
  h2 {
    font-size:32px;
    font-weight:700;
    margin:0;
    color:var(--text);
    letter-spacing:-0.02em;
  }
  
  .header-actions {
    position:absolute;
    right:60px;
    top:50%;
    transform:translateY(-50%);
    display:flex;
    align-items:center;
    gap:12px;
    flex-wrap:wrap;
  }

  .header-link {
    background:rgba(255,255,255,0.14);
    border:1px solid rgba(255,255,255,0.35);
    color:#ffffff;
    letter-spacing:0.1em;
    text-transform:uppercase;
  }
  
  .record-indicator {
    font-size:13px;
    padding:6px 12px;
    border-radius:999px;
    border:1px solid #2a2f37;
    color:#9aa1ac;
  }
  
  .record-indicator.online {
    color:#ff7a7a;
    border-color:rgba(255,0,67,0.35);
    background:rgba(255,0,67,0.08);
  }
  
  button {
    background:rgba(255,255,255,0.18);
    border:1px solid rgba(255,255,255,0.4);
    color:#f7f9ff;
    padding:10px 18px;
    border-radius:999px;
    font-weight:600;
    font-size:14px;
    cursor:pointer;
    transition:all 180ms ease;
    backdrop-filter:blur(4px);
  }
  button:hover { transform:translateY(-2px); background:rgba(255,255,255,0.3); }
  button:disabled { opacity:0.3; cursor:not-allowed }
  button.secondary,
  button.secondary.ghost {
    background:rgba(255,255,255,0.08);
    border-color:rgba(255,255,255,0.25);
  }
  
  /* Ripple 画布 - 圆圈在这里浮动 */
  .ripple-canvas {
    position:relative;
    min-height:calc(100vh - 160px);
    padding:0;
    width:100%;
  }
  .view-panel .ripple-canvas {
    min-height:calc(100vh - 160px);
    padding:0;
  }
  
  .view-container {
    margin-top:10px;
    position:relative;
    z-index:3;
    flex:1;
    display:flex;
    flex-direction:column;
    overflow:visible;
    min-height:0;
  }
  
  .view-ripple .view-container {
    margin-top:0;
  }
  
.view-panel {
  position:relative;
  border:none;
  border-radius:0;
  background:transparent;
  overflow:visible;
  flex:1;
  display:flex;
  flex-direction:column;
  box-shadow:none;
  padding:0;
  min-height:0;
}

.view-panel.empty {
  min-height: clamp(480px, calc(100vh - 320px), 900px);
}

.panel-bounds {
  width:100%;
  flex:1;
  display:flex;
  flex-direction:column;
  margin:0;
  overflow:visible;
  min-height:0;
}

.panel-scroll {
  flex:1;
  overflow:auto;
  position:relative;
  padding:12px 8px 240px 0;
  min-height:0;
}

.ripple-view .panel-scroll {
  padding:0 0 160px 0;
}

/* Keep lanes scrollable past bottom controls */
.view-lanes .panel-scroll {
  padding-bottom:280px;
  max-height:calc(100vh - 220px);
  overflow-y:auto;
}

.panel-stage {
  position:relative;
  width:100%;
  min-height:600px;
}

.view-grid-overlay {
  display:none;
}
  
  .view-placeholder {
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    gap:12px;
    color:var(--muted);
    pointer-events:none;
  }
  
  /* When view is empty, make placeholder fixed and centered */
  .view-panel.empty .view-placeholder {
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%, -50%);
    width:100%;
    max-width:600px;
    z-index:10;
  }
  
  .view-placeholder h3 {
    font-size:42px;
    color:#ffffff;
    margin:0;
  }
  
  .view-placeholder p {
    font-size:16px;
    line-height:1.5;
    margin:0;
    white-space:nowrap;
  }
  
  .lanes-view {
    display:flex;
    flex-direction:column;
    gap:18px;
  width:100%;
  max-width:1200px;
  margin:0 auto;
  padding:40px 0 60px;
  }
  
  .lane-card {
    position:relative;
    display:flex;
    align-items:center;
    gap:18px;
    padding:22px 28px;
    min-height:112px;
    border:none;
    border-radius:22px;
    background:linear-gradient(30deg, rgba(255,255,255,0.16), rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    backdrop-filter:blur(16px);
    -webkit-backdrop-filter:blur(16px);
    box-shadow:0 10px 32px rgba(0,0,0,0.24), 0 0 0 1px rgba(255,255,255,0.06);
    cursor:pointer;
    overflow:hidden;
    isolation:isolate;
    transition:transform 260ms ease, background 260ms ease, box-shadow 260ms ease;
  }

  .lane-card::before {
    content:'';
    position:absolute;
    inset:-10px;
    background:linear-gradient(30deg, rgba(255,255,255,0.22), rgba(255,255,255,0.08), transparent);
    filter:blur(18px);
    opacity:0;
    transition:opacity 260ms ease;
    z-index:0;
    pointer-events:none;
  }

  .lane-card > * {
    position:relative;
    z-index:1;
  }
  
  .lane-card:hover {
    transform:translateY(-3px);
    background:linear-gradient(30deg, rgba(255,255,255,0.18), rgba(255,255,255,0.1), rgba(255,255,255,0.06));
    box-shadow:0 12px 40px rgba(0,0,0,0.26), 0 8px 36px rgba(255,255,255,0.12);
  }

  .lane-card:hover::before {
    opacity:1;
  }
  
  .lane-card.selected {
    transform:translateY(-5px);
    background:linear-gradient(30deg, rgba(255,255,255,0.22), rgba(255,255,255,0.12), rgba(255,255,255,0.08));
    box-shadow:0 16px 48px rgba(0,0,0,0.26), 0 10px 52px rgba(255,255,255,0.16);
  }

  .lane-card.selected::before {
    opacity:1;
  }
  
  .lane-pulse {
    width:56px;
    height:56px;
    border-radius:16px;
    display:flex;
    align-items:center;
    justify-content:center;
  }
  
  .lane-dot {
    width:18px;
    height:18px;
    border-radius:50%;
  }
  
  .lane-body {
    flex:1;
    min-width:0;
  }
  
  .lane-title-row {
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:12px;
  }
  
  .lane-title {
    font-size:20px;
    font-weight:700;
    color:#fff;
  }
  
  .lane-count {
    font-size:12px;
    color:var(--muted);
  }
  
  .lane-keywords {
    display:flex;
    flex-wrap:wrap;
    gap:10px;
  }
  
  .lane-chip {
    padding:6px 12px;
    border-radius:999px;
    font-size:12px;
    background:rgba(255,255,255,0.08);
  }
  
  .stacks-view {
  width:100%;
  max-width:1200px;
  margin:0 auto;
  padding:40px 12px 80px; /* small inset so shadows aren't clipped */
  }
  
  .stack-track {
    display:flex;
    gap:24px;
  overflow-x:auto;
  overflow-y:visible; /* allow lifted selected cards to show fully */
  padding:8px 0;
  -webkit-overflow-scrolling:touch;
  }

/* Let card shadows breathe in lanes/stacks views */
.view-stacks .app-content,
.view-lanes .app-content {
  overflow:visible;
}
  
  .stack-card {
  width:260px;
  flex:0 0 260px; /* lock width so cards stay consistent */
    position:relative;
    border:none;
    border-radius:22px;
    background:linear-gradient(30deg, rgba(255,255,255,0.16), rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    backdrop-filter:blur(16px);
    -webkit-backdrop-filter:blur(16px);
    box-shadow:0 10px 32px rgba(0,0,0,0.24), 0 0 0 1px rgba(255,255,255,0.06);
    padding:20px;
    display:flex;
    flex-direction:column;
    gap:16px;
    cursor:pointer;
    overflow:hidden;
    isolation:isolate;
    transition:transform 260ms ease, background 260ms ease, box-shadow 260ms ease;
  }

  .stack-card::before {
    content:'';
    position:absolute;
    inset:-10px;
    background:linear-gradient(30deg, rgba(255,255,255,0.22), rgba(255,255,255,0.08), transparent);
    filter:blur(18px);
    opacity:0;
    transition:opacity 260ms ease;
    z-index:0;
    pointer-events:none;
  }

  .stack-card > * {
    position:relative;
    z-index:1;
  }
  
  .stack-card:hover {
    transform:translateY(-4px);
    background:linear-gradient(30deg, rgba(255,255,255,0.18), rgba(255,255,255,0.1), rgba(255,255,255,0.06));
    box-shadow:0 12px 40px rgba(0,0,0,0.26), 0 8px 36px rgba(255,255,255,0.12);
  }

  .stack-card:hover::before {
    opacity:1;
  }
  
  .stack-card.selected {
    transform:translateY(-6px);
    background:linear-gradient(30deg, rgba(255,255,255,0.22), rgba(255,255,255,0.12), rgba(255,255,255,0.08));
    box-shadow:0 16px 48px rgba(0,0,0,0.26), 0 10px 52px rgba(255,255,255,0.16);
  }

  .stack-card.selected::before {
    opacity:1;
  }
  
  .stack-head {
    display:flex;
  gap:10px;
    align-items:center;
  }
  
  .stack-marker {
  width:30px;
  height:42px;
    border-radius:16px;
    display:flex;
    align-items:center;
  justify-content:center;
  }
  
  .stack-marker span {
    width:12px;
    height:12px;
    border-radius:50%;
    display:block;
  }
  
  .stack-title {
    font-size:18px;
    font-weight:700;
    color:#fff;
  }
  
  .stack-subtitle {
    font-size:13px;
    color:var(--muted);
  }
  
  .stack-body {
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  
  .stack-chip {
    padding:10px 12px;
    border-radius:12px;
    background:rgba(255,255,255,0.08);
    font-size:13px;
  }
  
  .map-view {
    padding:0;
  }

  .map-view.full-bleed,
  .map-view.full-bleed .map-canvas {
  padding: 0;
  margin: 0;
}

/* let the map view use the full available height like ripple */
.map-view .panel-scroll {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-right: 0;
  }

  
.map-canvas {
  display:block;
  width:100%;
  max-width:none;
}
  
  .map-circle-glass {
    transition:all 200ms ease;
  }
  
  /* 让 Map 圆节点在位置变化时平滑移动（配合 <g transform>） */
.map-topic,
.map-keyword {
  transition: transform 420ms cubic-bezier(0.23, 1, 0.32, 1);
}

  .map-topic:hover .map-circle-glass {
    fill:rgba(255,255,255,0.12);
    stroke:rgba(255,255,255,0.4);
    filter:drop-shadow(0 4px 20px rgba(100,180,255,0.2));
  }
  
  .map-keyword:hover .map-circle-glass {
    fill:rgba(255,255,255,0.1);
    stroke:rgba(255,255,255,0.35);
  }
  
  /* .map-topic-text,
  .map-keyword-text {
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    line-height:1.3;
    color:#ffffff;
    padding:4px;
    overflow-wrap:anywhere;
  }
  
  .map-topic-text {
    font-weight:700;
  }
  
  .map-keyword-text {
    font-weight:600;
    color:rgba(255,255,255,0.9);
  } */

  .map-topic-text,
  .map-keyword-text {
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:4px;
  }
  
  /* Topic 标题：保持现在的粗体效果 */
  .map-topic-text {
    font-weight:700;
    line-height:1.3;
    color:#ffffff;
    overflow-wrap:normal;
    word-break:normal;
  }
  
  /* Map keywords：用和 ripple-summary 类似的正文风格，避免在单词中间断行 */
  .map-keyword-text {
    font-weight:400;          /* 不再是粗体，跟 Ripple 正文一致 */
    font-size:12px;
    line-height:1.45;
    color:var(--text);
    white-space:normal;
    word-break:keep-all;      /* 尽量只在空格处换行 */
    overflow-wrap:normal;     /* 不在单词中间强行折行 */
    hyphens:auto;             /* 实在装不下时用连字符分词 */
  }
  


  
  
  .map-topic.selected .map-circle-glass {
    fill:rgba(255,255,255,0.15);
    stroke:rgba(255,255,255,0.5);
    stroke-width:3px;
    filter:drop-shadow(0 0 20px rgba(100,180,255,0.4));
  }
  
  /* 单个 Ripple 圆圈 */
  .ripple {
    position:absolute;
    border-radius:50%;
    border:2px solid rgba(255, 255, 255, 0.3);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    cursor:pointer;
    transition:all 500ms cubic-bezier(0.4, 0, 0.2, 1);
    background:rgba(255, 255, 255, 0.08);
    backdrop-filter:blur(20px);
    -webkit-backdrop-filter:blur(20px);
    padding:20px;
    box-shadow:0 8px 32px rgba(0,0,0,0.2), inset 0 0 0 1px rgba(255,255,255,0.1);
  }
  
  /* 涟漪同心圆效果 */
  .ripple:before,
  .ripple:after {
    content:'';
    position:absolute;
    border-radius:50%;
    border:1px solid rgba(255, 255, 255, 0.2);
    opacity:0.5;
    pointer-events:none;
  }
  
  .ripple:before {
    top:-15px;
    left:-15px;
    right:-15px;
    bottom:-15px;
  }
  
  .ripple:after {
    top:-30px;
    left:-30px;
    right:-30px;
    bottom:-30px;
    opacity:0.25;
  }
  
  .ripple:hover {
    transform:translate(-50%, -50%) scale(1.05);
    background:rgba(255, 255, 255, 0.12);
    box-shadow:0 12px 40px rgba(100, 180, 255, 0.25), inset 0 0 0 1px rgba(255,255,255,0.15);
    z-index:10 !important;
  }
  
  .ripple:hover:before {
    animation:rippleWave 1.5s ease-out infinite;
  }
  
  .ripple:hover:after {
    animation:rippleWave 1.5s ease-out infinite 0.3s;
  }
  
  @keyframes rippleWave {
    0% {
      transform:scale(1);
      opacity:0.3;
    }
    100% {
      transform:scale(1.2);
      opacity:0;
    }
  }
  
  /* 圆圈内的标签 */
  .ripple-label {
    font-size:15px;
    font-weight:700;
    margin-bottom:8px;
    color:var(--accent);
    line-height:1.3;
    max-width:90%;
    text-align:center;
    white-space:normal;
    overflow-wrap:anywhere;
    hyphens:auto;
  }
  
  .ripple-summary {
    font-size:12px;
    color:var(--text);
    margin-top:4px;
    max-width:92%;
    line-height:1.45;
    text-align:center;
    position:relative;
    z-index:1;
    white-space:normal;
    /* 多行省略号：最多 x 行，超出的部分用 … 隐藏 */
    display:-webkit-box;
    -webkit-line-clamp:4;
    line-clamp:4;
    -webkit-box-orient:vertical;
    overflow:hidden;
    text-overflow:ellipsis;
    word-break:normal;
    overflow-wrap:normal;
  }
  
  
  /* 新圆圈出现动画 */
  @keyframes rippleAppear {
    0% { 
      transform:translate(-50%, -50%) scale(0);
      opacity:0;
    }
    60% { 
      transform:translate(-50%, -50%) scale(1.1);
      opacity:0.8;
    }
    100% { 
      transform:translate(-50%, -50%) scale(1);
      opacity:1;
    }
  }
  
  .ripple.new {
    animation:rippleAppear 800ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  /* 圆圈扩张动画（内容增加时）*/
  @keyframes rippleExpand {
    0%, 100% { transform:translate(-50%, -50%) scale(1) }
    50% { transform:translate(-50%, -50%) scale(1.08) }
  }
  
  .ripple.expanding {
    animation:rippleExpand 600ms ease-out;
  }
  
  /* 选中状态 */
  .ripple.selected {
    border-width:2px;
    border-color:rgba(255, 255, 255, 0.5);
    background:rgba(255, 255, 255, 0.15);
    box-shadow:0 16px 48px rgba(100, 180, 255, 0.3), inset 0 0 0 1px rgba(255,255,255,0.2);
    z-index:20 !important;
    transform:translate(-50%, -50%) scale(1.02);
  }
  
  /* Transcript bar - hidden, text logged to console only */

.recording-control {
  position:fixed;
  bottom:70px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  z-index:1200;
}

.recording-button {
  width:78px;
  height:78px;
  border-radius:999px;
  border:none;
  background:rgba(255,255,255,0.95);
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
  cursor:pointer;
  position:relative;
  transition:transform 200ms ease, box-shadow 200ms ease;
}

.recording-button.active {
  background:rgba(255,255,255,0.98);
  box-shadow:0 15px 40px rgba(255,255,255,0.3);
}

.recording-icon-wrapper {
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2;
}

.recording-icon {
  width:26px;
  height:26px;
  stroke-width:1.8;
  color:#0b0c10;
  transition:transform 200ms ease;
}

.recording-button.active .recording-icon {
  color:#0b0c10;
}

/* White pulsing rings when recording */
.recording-ring {
  position:absolute;
  inset:0;
  border-radius:999px;
  border:2px solid rgba(255,255,255,0.6);
  animation:ringPulse 2s ease-out infinite;
  pointer-events:none;
}

.recording-ring.ring-2 {
  animation-delay:0.5s;
}

.recording-ring.ring-3 {
  animation-delay:1s;
}

@keyframes ringPulse {
  0% {
    transform:scale(1);
    opacity:0.8;
  }
  100% {
    transform:scale(2.2);
    opacity:0;
  }
}

.recording-hint {
  font-size:14px;
  color:var(--muted);
  letter-spacing:0.02em;
}

/* 水滴与波纹特效 */
.drop-wrapper {
  position:absolute;
  inset:0;
  pointer-events:none;
  z-index:4;
}

.water-drop {
  position:absolute;
  width:20px;
  height:28px;
  transform:translate(-50%, -200%);
  animation:dropFall 0.65s cubic-bezier(0.4, 0, 0.6, 1) forwards;
}

.water-drop::before {
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(circle at 35% 30%, #fff, var(--effect-blue));
  clip-path:path("M10 0 C10 0 0 10 0 16 C0 20.4183 4.47715 24 10 24 C15.5228 24 20 20.4183 20 16 C20 10 10 0 10 0 Z");
  box-shadow:0 8px 14px rgba(57, 91, 190, 0.45);
}

.impact-splash {
  position:absolute;
  width:0;
  height:0;
  border-radius:999px;
  background:radial-gradient(circle, rgba(255,255,255,0.9), rgba(255,255,255,0));
  transform:translate(-50%, -50%);
  animation:impactPulse 0.45s ease-out forwards;
}

.topic-wave-group {
  position:absolute;
  width:0;
  height:0;
  transform:translate(-50%, -50%);
  pointer-events:none;
}

.topic-wave {
  position:absolute;
  border-radius:999px;
  border:2px solid var(--effect-blue);
  animation:waveExpand 3.2s ease-out forwards;
}

.topic-wave.ring-2 {
  border-color:var(--effect-cyan);
  animation-duration:2.8s;
  animation-delay:0.18s;
}

.topic-wave.ring-3 {
  border-color:rgba(255,255,255,0.4);
  animation-duration:2.4s;
  animation-delay:0.32s;
}

.topic-wave.inner-glow {
  border:none;
  width:30px;
  height:30px;
  background:radial-gradient(circle, rgba(109, 165, 255, 0.6), transparent 60%);
  filter:blur(2px);
  animation:innerGlow 1.4s ease-out forwards;
}

.ambient-wave {
  position:absolute;
  width:30px;
  height:30px;
  border:1px solid rgba(255,255,255,0.08);
  border-radius:50%;
  transform:translate(-50%, -50%);
  animation:ambientWave 10s ease-in-out infinite;
}

@keyframes dropFall {
  0% { opacity:0; transform:translate(-50%, -280%); }
  60% { opacity:1; }
  100% { opacity:1; transform:translate(-50%, -20%); }
}

@keyframes impactPulse {
  0% { opacity:0; width:0; height:0; }
  40% { opacity:0.85; }
  100% { opacity:0; width:44px; height:44px; }
}

@keyframes waveExpand {
  0% { opacity:0.9; width:20px; height:20px; }
  100% { opacity:0; width:520px; height:520px; }
}

@keyframes innerGlow {
  0% { opacity:0.6; width:10px; height:10px; }
  100% { opacity:0; width:130px; height:130px; }
}

@keyframes ambientWave {
  0% { opacity:0.05; width:40px; height:40px; }
  50% { opacity:0.18; }
  100% { opacity:0; width:700px; height:700px; }
}

/* Old recordPulse removed - now using siriPulse */

/* History Panel */
.history-panel {
  position:fixed;
  left:120px;
  top:50%;
  transform:translateY(-50%);
  width:320px;
  max-height:70vh;
  background:rgba(255, 255, 255, 0.08);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,0.2);
  border-radius:20px;
  padding:20px;
  z-index:1500;
  box-shadow:0 20px 60px rgba(0,0,0,0.3);
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.history-header {
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:16px;
  padding-bottom:12px;
  border-bottom:1px solid rgba(255,255,255,0.15);
}

.history-header h3 {
  font-size:18px;
  font-weight:700;
  color:#ffffff;
  margin:0;
}

.history-close-btn {
  background:transparent;
  border:none;
  padding:8px;
  cursor:pointer;
  color:rgba(255,255,255,0.6);
  border-radius:8px;
  transition:all 150ms ease;
}

.history-close-btn:hover {
  background:rgba(255,255,255,0.1);
  color:#ffffff;
}

.history-close-btn .icon {
  width:18px;
  height:18px;
}

.history-list {
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.history-loading,
.history-empty {
  color:rgba(255,255,255,0.5);
  font-size:14px;
  text-align:center;
  padding:20px 0;
}

.history-item {
  background:rgba(255,255,255,0.06);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:12px;
  padding:14px;
  cursor:pointer;
  transition:all 200ms ease;
}

.history-item-top {
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:8px;
  margin-bottom:6px;
}

.history-delete-btn {
  background:transparent;
  border:none;
  padding:6px;
  border-radius:8px;
  color:rgba(255,255,255,0.5);
  cursor:pointer;
  transition:all 150ms ease;
  flex-shrink:0;
}

.history-delete-btn .icon {
  width:16px;
  height:16px;
}

.history-delete-btn:hover {
  background:rgba(255,255,255,0.12);
  color:#ffffff;
}

.history-item:hover {
  background:rgba(255,255,255,0.12);
  border-color:rgba(255,255,255,0.2);
  transform:translateX(4px);
}

.history-item-title {
  font-size:15px;
  font-weight:600;
  color:#ffffff;
  margin-bottom:4px;
}

.history-item-summary {
  font-size:13px;
  color:rgba(255,255,255,0.7);
  margin-bottom:8px;
  line-height:1.4;
}

.history-item-meta {
  font-size:11px;
  color:rgba(255,255,255,0.4);
}
  
  /* 右侧详情面板 */
  .detail-layer {
    position:fixed;
    inset:0;
    z-index:1700;
    display:flex;
    align-items:center;
    justify-content:center;
    pointer-events:none;
  }

  .detail-layer.open {
    pointer-events:auto;
  }

  .detail-overlay {
    position:absolute;
    inset:0;
    background:rgba(5, 6, 12, 0.55);
    backdrop-filter:blur(16px);
    -webkit-backdrop-filter:blur(16px);
    opacity:0;
    transition:opacity 220ms ease;
  }

  .detail-layer.open .detail-overlay {
    opacity:1;
  }

  .detail-panel {
    position:relative;
    width:min(720px, calc(100% - 64px));
    max-height:min(80vh, 780px);
    background:linear-gradient(30deg, rgba(255,255,255,0.16), rgba(255,255,255,0.1), rgba(255,255,255,0.06));
    border:none;
    border-radius:32px;
    padding:28px;
    overflow-y:auto;
    transform:translateY(12px) scale(0.97);
    opacity:0;
    box-shadow:0 16px 64px rgba(0,0,0,0.45), 0 8px 48px rgba(255,255,255,0.12);
    backdrop-filter:blur(22px);
    -webkit-backdrop-filter:blur(22px);
    transition:transform 260ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 260ms ease;
    pointer-events:auto;
    isolation:isolate;
  }
  
  .detail-panel.open {
    opacity:1;
    transform:translateY(0) scale(1);
  }
  
  .detail-header {
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-bottom:16px;
    padding-bottom:16px;
    border-bottom:2px solid #1a1f2e;
  }
  
  .detail-title {
    font-size:28px;
    font-weight:800;
    color:var(--accent);
  }
  
  .close-btn {
    background:transparent;
    color:var(--muted);
    padding:8px;
    font-size:20px;
    min-width:auto;
  }
  
  .detail-summary {
    color:var(--muted);
    font-size:14px;
    line-height:1.6;
    margin-bottom:24px;
    padding:12px;
    background:rgba(11, 12, 16, 0.5);
    border-radius:8px;
  }
  
  .detail-points {
    list-style:none;
  }
  
  .detail-point {
    color:var(--text);
    font-size:14px;
    line-height:1.8;
    margin-bottom:12px;
    padding-left:24px;
    position:relative;
  }
  
  .detail-point:before {
    content:'';
    position:absolute;
    left:0;
    top:8px;
    width:8px;
    height:8px;
    border-radius:50%;
    background:var(--accent);
  }
  
  @media (max-width: 768px) {
    .detail-panel {
      width:100%;
    }
  }

  @media (max-width: 1024px) {
    :root {
      --nav-gutter:24px;
      --content-gap:20px;
    }
    .app-content {
      padding:140px 20px 160px;
    }
    .header {
      left:0;
      padding:16px 24px;
    }
    .left-sidebar {
      flex-direction:row;
      top:auto;
      bottom:110px;
      left:24px;
      transform:none;
      gap:24px;
    }
    .sidebar-label {
      display:none;
    }
    .view-switcher {
      flex-direction:row;
      top:auto;
      bottom:110px;
      right:24px;
      left:auto;
      transform:none;
      gap:16px;
    }
    .view-switcher-icon {
      width:50px;
      height:50px;
    }
    .view-switcher-label {
      display:none;
    }
    .lanes-view {
      gap:14px;
    }
    .lane-card {
      padding:18px 20px;
      min-height:104px;
      border-radius:20px;
    }
    .lane-pulse {
      width:48px;
      height:48px;
      border-radius:14px;
    }
    .lane-dot {
      width:16px;
      height:16px;
    }
    .history-panel {
      left:16px;
      right:16px;
      width:auto;
      top:auto;
      bottom:180px;
      transform:none;
      max-height:50vh;
    }
    .recording-control {
      bottom:24px;
    }
  }
  